# TODO.md: –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π BuddyBot API

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–ª–∞–Ω —Ä–∞–±–æ—Ç –ø–æ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–µ–π (`–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è2.html`), –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –æ—à–∏–±–æ–∫ –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.

## –≠—Ç–∞–ø 1: –§—É–Ω–¥–∞–º–µ–Ω—Ç –∏ –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö

–°–∞–º—ã–π –≤–∞–∂–Ω—ã–π —ç—Ç–∞–ø ‚Äî –ø–µ—Ä–µ—Å—Ç—Ä–æ–∏—Ç—å –æ—Å–Ω–æ–≤—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–ª—é—á–µ–≤—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –∫–æ–Ω—Ü–µ–ø—Ü–∏–π.

*   [ ] **1.1. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ö–µ–º—É Prisma (`schema.prisma`)**:
    *   [ ] **–£–¥–∞–ª–∏—Ç—å/–ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å —É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏**: –¢–µ–∫—É—â–∏–µ `Component` –∏ `Progress` —Å–ª–∏—à–∫–æ–º –æ–±—â–∏–µ. `Flow` –Ω–µ –∏–º–µ–µ—Ç —à–∞–≥–æ–≤.
    *   [ ] **–î–æ–±–∞–≤–∏—Ç—å –º–æ–¥–µ–ª–∏ "–°–Ω–∞–ø—à–æ—Ç–æ–≤"**:
        *   `FlowSnapshot`
        *   `FlowStepSnapshot`
        *   `ComponentSnapshot` (–≤–æ–∑–º–æ–∂–Ω–æ, –∫–∞–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–ª–∏ –±–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å)
    *   [ ] **–î–æ–±–∞–≤–∏—Ç—å –º–æ–¥–µ–ª—å `FlowStep`**: Flow –¥–æ–ª–∂–µ–Ω —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ —à–∞–≥–æ–≤ (`FlowStep`), –∞ —à–∞–≥–∏ ‚Äî –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
    *   [ ] **–î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å `Component`**: –í–º–µ—Å—Ç–æ `content: Json` —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (`ArticleComponent`, `TaskComponent`, `QuizComponent` –∏ —Ç.–¥.) —Å–æ —Å–≤–æ–∏–º–∏ –ø–æ–ª—è–º–∏. –û–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω—ã —Å –±–∞–∑–æ–≤–æ–π –º–æ–¥–µ–ª—å—é `Component`.
    *   [ ] **–î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É `Progress`**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫—É—é —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ–≥—Ä–µ—Å—Å–∞, –∫–∞–∫ –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏: `ComponentProgress`, `StepProgress`, `FlowProgress`, `UserProgress`.
    *   [ ] **–î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å `Notification`**: –†–∞—Å—à–∏—Ä–∏—Ç—å –º–æ–¥–µ–ª—å `Notification` –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏ –∏–∑ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ (type, priority, status, context, actions).
    *   [ ] **–î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å `FlowAssignment`**: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –¥–ª—è `buddies`, `primaryBuddy`, `pauseReason` –∏ —Ç.–¥.
    *   [ ] **–î–æ–±–∞–≤–∏—Ç—å `SystemSettings`**: –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∏—Å—Ç–µ–º—ã (—Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã, –ø—Ä–∞–∑–¥–Ω–∏–∫–∏).
*   [ ] **1.2. –°–æ–∑–¥–∞—Ç—å –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**: –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `schema.prisma` —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é (`prisma migrate dev`).

## –≠—Ç–∞–ø 2: –Ø–¥—Ä–æ –ë–∏–∑–Ω–µ—Å-–õ–æ–≥–∏–∫–∏ (`packages/api/src/core`)

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω–Ω—É—é –ª–æ–≥–∏–∫—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–æ–≤–æ–π —Å—Ö–µ–º—ã –ë–î.

*   [ ] **2.1. –°–æ–∑–¥–∞—Ç—å –≤—Å–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ñ–∞–π–ª—ã —Å—É—â–Ω–æ—Å—Ç–µ–π (`entities`)**:
    *   `Flow.ts`, `FlowStep.ts`, `Component.ts` (–∏ –µ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç—ã)
    *   `FlowSnapshot.ts`, `FlowStepSnapshot.ts`, `ComponentSnapshot.ts`
    *   –í—Å–µ –º–æ–¥–µ–ª–∏ `Progress`.
    *   `Notification.ts`, `Achievement.ts`, `SystemSettings.ts`
*   [ ] **2.2. –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (`repositories`)**: –î–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
*   [ ] **2.3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏**: –í `packages/api/src/infrastructure/database/repositories` —Å–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å—ã, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Prisma Client.
*   [ ] **2.4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã (`services`)**:
    *   [ ] **`FlowService` / `SnapshotService`**: –õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–Ω–∞–ø—à–æ—Ç–æ–≤ –ø—Ä–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ –ø–æ—Ç–æ–∫–∞ (`FlowAssignment`). –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞—è —á–∞—Å—Ç—å.
    *   [ ] **`ProgressService`**: –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –¥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   [ ] **`DeadlineService`**: –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –¥–µ–¥–ª–∞–π–Ω–æ–≤ —Å —É—á–µ—Ç–æ–º —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π, –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ –∏ –ø–∞—É–∑ (–∏—Å–ø–æ–ª—å–∑—É—è `SystemSettings`).
    *   [ ] **`NotificationService`**: –õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—ã—Ç–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ.

## –≠—Ç–∞–ø 3: –°–ª–æ–π GraphQL (`packages/api/src/schema`)

–û—Ç–∫—Ä—ã—Ç—å –Ω–æ–≤—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

*   [ ] **3.1. –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ GraphQL —Ç–∏–ø—ã (`types`)**: –ü—Ä–∏–≤–µ—Å—Ç–∏ –≤—Å–µ —Ñ–∞–π–ª—ã `.type.ts` –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–µ–π, –≤–∫–ª—é—á–∞—è `Union` —Ç–∏–ø—ã –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ `Enum`'—ã.
*   [ ] **3.2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ Queries**:
    *   `getFlowDetails` —Å –ø–æ–ª–Ω–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–µ–π –¥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
    *   Queries –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π, —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫.
    *   Queries –¥–ª—è Buddy –∏ Admin (–ø—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ–¥–æ–ø–µ—á–Ω—ã—Ö –∏ —Ç.–¥.).
*   [ ] **3.3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ Mutations**:
    *   [ ] **`interactWithComponent`**: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –º—É—Ç–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º.
    *   [ ] –ú—É—Ç–∞—Ü–∏–∏ –¥–ª—è Buddy: `assignFlow`, `pauseFlow`, `extendDeadline`.
    *   [ ] –ú—É—Ç–∞—Ü–∏–∏ –¥–ª—è Admin: `createFlow`, `editFlow`, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.
    *   [ ] –ú—É—Ç–∞—Ü–∏–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π: `markAsRead`.
*   [ ] **3.4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Subscriptions**:
    *   `progressUpdates` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   `userNotifications` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
    *   `buddyNotifications` –¥–ª—è –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–≤.

## –≠—Ç–∞–ø 4: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ –∏ DX (Developer Experience)

*   [ ] **4.1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**: –ü—Ä–æ–≤–µ—Å—Ç–∏ `npm install` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
*   [ ] **4.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `tsconfig.json`**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—É—Ç–∏ (`paths`) –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤ –≤–æ –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–∞—Ö.
*   [ ] **4.3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤**: –ü—Ä–æ–π—Ç–∏—Å—å –ø–æ –≤—Å–µ–º —Ñ–∞–π–ª–∞–º –≤ `packages/api` –∏ `packages/database` –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∏–º–ø–æ—Ä—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø–æ—Å–ª–µ —Ä–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏–∏.
*   [ ] **4.4. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ DataLoader**: –î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î (—Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã N+1) –≤–Ω–µ–¥—Ä–∏—Ç—å `DataLoader` –≤ GraphQL —Ä–µ–∑–æ–ª–≤–µ—Ä—ã.
*   [ ] **4.5. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞**: –ü–æ–∫—Ä—ã—Ç—å –≤–µ—Å—å –Ω–æ–≤—ã–π –∫–æ–¥ JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏, –∫–∞–∫ —É–∫–∞–∑–∞–Ω–æ –≤ `AGENT.md`.
*   [ ] **4.6. –õ–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å `eslint` –∏ `prettier` –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∫–æ–¥–∞.

## –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –¥–æ—Ä–∞–±–æ—Ç–∫–∏ BuddyBot API

### –≠—Ç–∞–ø 1.1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã Prisma (1 –¥–µ–Ω—å)
- [ ] –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å –º–æ–¥–µ–ª–∏ Component –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∏–ø—ã (Article, Quiz, Task)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥–µ–ª–∏ *Snapshot
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–≤—è–∑–∏ –º–µ–∂–¥—É Flow-FlowStep-Component

### –≠—Ç–∞–ø 1.2: –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î (0.5 –¥–Ω—è)
- [ ] –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –≠—Ç–∞–ø 2: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (2 –¥–Ω—è)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å SnapshotService
- [ ] –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å ProgressService
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –≠—Ç–∞–ø 3: GraphQL API (1.5 –¥–Ω—è)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø—ã
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ queries/mutations

### –≠—Ç–∞–ø 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (1 –¥–µ–Ω—å)
- [ ] –í–Ω–µ–¥—Ä–∏—Ç—å DataLoader
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ ‚Äî 21.06.2025

### –í—ã–ø–æ–ª–Ω–µ–Ω–æ
- –°—Ö–µ–º–∞ Prisma –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏2: –¥–æ–±–∞–≤–ª–µ–Ω—ã `FlowStep`, `FlowSnapshot`, `FlowStepSnapshot`, `ComponentSnapshot`, —Ä–∞—Å—à–∏—Ä–µ–Ω—ã `Notification`, `FlowAssignment`, –¥–æ–±–∞–≤–ª–µ–Ω—ã `SystemSettings`, –≤–Ω–µ–¥—Ä–µ–Ω–∞ –∏–µ—Ä–∞—Ä—Ö–∏—è `*Progress`.
- –ú–æ–¥–µ–ª–∏ –≤ `packages/database/prisma/schema.prisma` —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å–æ —Å–ø–µ–∫–æ–π.
- –°–æ–∑–¥–∞–Ω—ã —Å—É—â–Ω–æ—Å—Ç–∏ `Flow`, `FlowAssignment`, `Progress`, `Snapshot`, `SystemSettings`, `Notification`, `Achievement`, `User` –≤ `core/entities`.

### –í –ø—Ä–æ—Ü–µ—Å—Å–µ / –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏
1. üîß **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: –≤—ã–¥–µ–ª–∏—Ç—å –ø–æ–¥—Ç–∏–ø—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (`ArticleComponent`, `TaskComponent`, `QuizComponent`...) –≤ Prisma-—Å—Ö–µ–º–µ –∏ `core/entities`.
2. üõ† **–ú–∏–≥—Ä–∞—Ü–∏–∏**: —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é (`npm run db:migrate`) –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º—ã.
3. üß© **Entities**: —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—É—Å—Ç—ã–µ/—á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (`Component.ts`, —Å–Ω–∞–ø—à–æ—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤/—à–∞–≥–æ–≤).
4. üèó **Repositories & Services**:
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π.
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã: `SnapshotService`, `ProgressService`, `DeadlineService`, `NotificationService`.
5. üöÄ **GraphQL —Å–ª–æ–π**:
   - –û–±–Ω–æ–≤–∏—Ç—å/—Å–æ–∑–¥–∞—Ç—å —Ç–∏–ø—ã.
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Queries (`getFlowDetails`, `userNotifications`, ...), Mutations (`interactWithComponent`, `assignFlow`, ...) –∏ Subscriptions.
6. ‚ö°Ô∏è **Performance**: –≤–Ω–µ–¥—Ä–∏—Ç—å DataLoader –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ Redis.
7. üßπ **DX**: –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `eslint`, `prettier`, –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –≤ `tsconfig`, –ø–æ–ø—Ä–∞–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–º–ø–æ—Ä—Ç—ã.
8. ‚úÖ **–¢–µ—Å—Ç—ã**: –ø–æ–∫—Ä—ã—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏ (`jest`, `supertest`).

### –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ (–±—ã—Å—Ç—Ä–∞—è)
| –ë–ª–æ–∫ | –í—Ä–µ–º—è |
|------|-------|
| –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –º–∏–≥—Ä–∞—Ü–∏–π | 0.5 –¥–Ω |
| Entities / Repositories | 1 –¥–Ω |
| Services (Snapshot/Progress/Deadline/Notification) | 1.5 –¥–Ω |
| GraphQL —Å–ª–æ–π | 1.5 –¥–Ω |
| –¢–µ—Å—Ç—ã + DX + Performance | 1 –¥–Ω |
| **–ò—Ç–æ–≥–æ** | **5.5 –¥–Ω** |

> –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –∏ –≥–∞–ª–æ—á–∫–∏ –≤—ã—à–µ –¥–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø—Ä–æ–µ–∫—Ç–∞.